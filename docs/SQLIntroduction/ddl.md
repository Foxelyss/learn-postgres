---
title: DDL
nav_order: 1
layout: default
parent: Введение в SQL
---

# Data Definition Language - позволяет создавать объекты

Код SQL читается программой сверху вниз, слева направо. Команда читается до `;`, поэтому вместо пробелов можно также ставить переносы, если так удобней.

Идентификатор - назвалние чего  либо в БД 

Пока что нам нужны ИНДФ:
1. Таблица - ИДТ
2. Столбца - ИДС

Главные правила :
1. Максимальная длина 128 смивоолов
2. ИНДФ не начинается с числа
3. ИНДФ не содержит пробелорв(а если содержит, то пишется тольько в двойных кавычках)

{: .note } 
`""` - определяет границы одного ИНДФ

Виды таблиц:
1. Исходные (пользовательские)
2. Серверные(системные, хранят служебную информацию, пользователей, привилегии и т.п.)
3. Временные(Результирующие, создаются в рамках запроса)


Комментарии создаются Двумя путями:
```sql
-- Вот так
код
/* И вот так
*/
код..
```
## Данные
### Виды данных
1. Числовые
2. Символьные

### Типы данных
1. Целочисленные 
2. С плавающей точкой
3. Символьные
4. Логические
5. Дата/Время

### Виды типов данных
- Стандартные(int, float,bool,text)
- Кастомные(money,bigint(10+ цифр), smallint(меньше 10 цифр), name, timestamp)

Некоторые из типов данных:

| Тип       | Что хранит?                                                                     |
| --------- | ------------------------------------------------------------------------------- |
| int       | Целое число(примерно 10 цифр максимум)                                          |
| float     | Дробное число                                                                   |
| double    | Дробное число большей точности                                                  |
| bool      | Булевое значение (true или false)                                               |
| bit       | Булевое значение(1 или 0)                                                       |
| date      | Дата                                                                            |
| time      | Время                                                                           |
| timestamp | Дата и Время                                                                    |
| char      | Последовательность символов(На пример "Привет, мир!"), но до 255 символов       |
| varchar   | Последовательность символов(На пример "Привет, мир!"), можно более 256 символов |
| text      | Текст, поддерживает самую большую длину                                         |
| money     | Специальный тип для денег                                                       |

Ограничение на поле - это огранличение накладываемые во время объявления типов данных, при создании столбцов

Для символьных это длина
```sql
varchar(30) -- 30 максимум
char(40) -- 40 максимальная длина
```

**Если не указать длину, то будет 1!**
```sql
char=char(1)
```

С плавающей точкой точность
```sql
float(1)
float(3)
```

Если не ограничевать по дефолту стоит максимальная точность

У целочисленных типов данных нет ограничений на поле, также и на битовые, дата/время.

## Команды:
### `create table` - создание таблица

Общий вид:
```
create table ИДТ(
ИДС тип_данных() ограничения_на_поля... ,
ИДС тип_данных() ограничения_на_поля... ,
ИДС тип_данных() ограничения_на_поля... ,
ИДС тип_данных() ограничения_на_поля...
);
```

Пример:
```sql
create table Employees(
id serial primary key,
surname char(25),
name char(15) not null,
age int check(age > 16)
);
```

#### Ограничения на столбец:
1. `null` - может быть пустым(содержать null), по умолчанию
2. `not null` - не может быть пустым, должно быть заполнено
3. `unique` - каждое значение в столбце уникально, не может повторяться
4. `primary key` - объявления первичного ключа, объединяет в себе unique и not null
5. `check` - проверка на удовлетворение условию 
6. `cascade` - это автоматическое изменения, внесение, удаление данных, происходящее по связям 
7. `index`
8. `references`
9. и т.д.

##### `Primary key`:
1. объявляется внутри строки `id serial primary key`
2. Отдельным столбцом `primary key(ИДС)`

##### `Foreign Key`:
1. объявляется внутри строки `id serial references ИДТ(ИДС)
2. Отдельным столбцом `ИДС references ИДТ(ИДС)`

##### `cascade` - это автоматическое изменения, внесение, удаление данных, происходящее по связям
Бывает
1. на внесение `id serial cascade insert
2. на обновление `id serial cascade update
3. на удаление `id serial cascade delete
4. Сразу несколько `id serial cascade insert, update ...

##### Check
Check - правило на столбец, которое позволяет ограничить какое-либо значение, которое будет вноситься

Общий вид:
check (ИДС вид-усл значение)

Пример:
check(age > 17)

Виды условий:
1. Сравнительный `< > >= <= = !=`, где `>=` и `<= `это условие где значение используется включительно, `!=` - неравенства, `''` - одинарные кавычки позволяют искать по символам, например `name = 'Степан'`

### `alter table` - создание таблица

Общий вид:
`alter table ИДТ действие`

| Действие                                 | Оператор                                |
| ---------------------------------------- | --------------------------------------- |
| Добавление столбца                       | `add column ИДС тип_данных ограничения` |
| Удаление столбца                         | `drop column ИДС`                       |
| Добавление ограничений на столбец        | `add constraint ИДС ограничения`        |
| Удаление **всех** ограничений на столбец | `drop constraint ИДС`                   |
| Переименование                           | `rename ИДС to ИДС`                     |


Примеры:
```sql
alter table test
add RegistrDate date not null;

alter table test
add constraint RegistrDate unique;

alter table test
drop constraint RegistrDate unique;

alter table test
drop column RegistrDate;
```

### `drop table` - удаление таблицы

